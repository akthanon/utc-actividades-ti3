<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gu√≠a B√°sica: Conectar JavaScript con MySQL (Node.js)</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 40px; background-color: #fafafa; color: #333; line-height: 1.6;">

  <header>
    <h1 style="text-align:center; color:#2c3e50;">üñ•Ô∏è Gu√≠a B√°sica: Conectar JavaScript con MySQL usando Node.js</h1>
    <p style="text-align:center;">Aprende c√≥mo conectar tu c√≥digo JavaScript con bases de datos MySQL utilizando Node.js</p>
    <hr>
  </header>

  <section>
    <h2>üìò Introducci√≥n a JavaScript</h2>
    <p>
      <strong>JavaScript</strong> es uno de los lenguajes m√°s usados en el desarrollo web moderno. 
      Se ejecuta en el <strong>navegador</strong> para dar interactividad, pero tambi√©n puede correr en el 
      <strong>servidor</strong> gracias a <em>Node.js</em>.
    </p>
  </section>

  <section>
    <h2>üíª Ejemplos b√°sicos de JavaScript</h2>

    <h3>Ejemplo 1: Hola Mundo</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
// En el navegador:
console.log("¬°Hola Mundo!");
</pre>

    <h3>Ejemplo 2: Condicionales</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
let edad = 18;

if (edad >= 18) {
  console.log("Eres mayor de edad");
} else {
  console.log("Eres menor de edad");
}
</pre>

    <h3>Ejemplo 3: Ciclos</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
for (let i = 1; i <= 5; i++) {
  console.log("N√∫mero: " + i);
}
</pre>

    <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      üìà Ejecuta los 3 ejemplos anteriores enl navegador  
      Para hacerlo, presiona <strong>ctrl+shift+i</strong> o presiona click derecho sobre cualquier ventana en el navegador.
      Y haz click en la opci√≥n <strong>Inspeccionar Elemento</strong>.
    </p>

    <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      üí° En el navegador, JavaScript no puede conectarse directamente a bases de datos por seguridad.  
      Para hacerlo, se utiliza <strong>Node.js</strong>.
    </p>
  </section>

  <section>
    <h2>‚öôÔ∏è Instalaci√≥n de Node.js en Windows</h2>
    <ol>
      <li>Visita <a href="https://nodejs.org" target="_blank">https://nodejs.org</a>.</li>
      <li>Descarga la versi√≥n <strong>LTS (Long Term Support)</strong>.</li>
      <li>Inst√°lala dejando las opciones por defecto.</li>
      <li>Abre la terminal (CMD o PowerShell) y ejecuta:</li>
    </ol>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
node -v
npm -v
</pre>
    <p>Si aparecen los n√∫meros de versi√≥n, la instalaci√≥n fue correcta.</p>
  </section>
<h2>‚öôÔ∏èCrear base de datos</h2>
<p>Inicia tu interfaz de mysql de preferencia.</p>
<h3>1Ô∏è‚É£ Crear la base de datos</h3>
<p>Dentro de la terminal o la interfaz gr√°fica introduce lo siguiente</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
CREATE DATABASE base_de_datos;
</pre>

<h3>2Ô∏è‚É£ Usar la base de datos</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
USE base_de_datos;
</pre>

<h3>3Ô∏è‚É£ Crear la tabla usuarios</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
CREATE TABLE usuarios (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(50),
  email VARCHAR(100),
  password VARCHAR(255)
);
</pre>

<h3>4Ô∏è‚É£ Insertar datos de prueba</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
INSERT INTO usuarios (nombre, email, password)
VALUES ('Gael', 'gael@artificial.htb', 'c99175974b6e192936d97224638a34f8'),
       ('Mark', 'mark@artificial.htb', '0f3d8c76530022670f1c6029eed09ccb'),
       ('Robert', 'robert@artificial.htb', 'hash_de_ejemplo');
</pre>
<h3>5Ô∏è‚É£ Consultar los datos</h3>
<p>Prueba una consulta antes de pasar a Node.js</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
SELECT * FROM usuarios;
</pre>
  <section>
    <h2>üîó Conectarse a MySQL con Node.js</h2>
    <p>
      Con Node.js instalado, crearemos un peque√±o proyecto para conectarnos a una base de datos MySQL.
    </p>
    <ol>
      <li>Crea una carpeta llamada <code>proyecto_mysql</code>.</li>
      <li>Entra en la carpeta y ejecuta estos comandos:</li>
    </ol>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
npm init -y
npm install mysql2
</pre>

<p>Crea el archivo de javascript directamente desde la terminal con el siguiente comando:</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
notepad db.js
</pre>

<h3>Ejemplo b√°sico de conexi√≥n</h3>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
// archivo: db.js
import mysql from 'mysql2';

const conexion = mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: 'toor',
  database: 'base_de_datos'
});

conexion.connect(err => {
  if (err) {
    console.error('Error al conectar:', err);
    return;
  }
  console.log('Conexi√≥n exitosa a MySQL');
});

conexion.query('SELECT * FROM usuarios', (err, resultados) => {
  if (err) throw err;
  console.log(resultados);
});

conexion.end();
</pre>
<p>Una vez creado el archivo inicia el programa con el siguiente comando:</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
node db.js
</pre>

<p>Si tienes un error de ejecuci√≥n por <Strong>Permisos</Strong>  prueba intenta los siguientes comandos en powershell como administrador:</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
Set-ExecutionPolicy RemoteSigned
</pre>

<p>Deberian tener una salida como la siguiente:
</p><pre style="background-color:#DEFFDE; padding:15px; border-radius:10px;">
Conexi√≥n exitosa a MySQL
[
  {
    id: 1,
    nombre: 'Gael',
    email: 'gael@artificial.htb',
    password: 'c99175974b6e192936d97224638a34f8'
  },
  {
    id: 2,
    nombre: 'Mark',
    email: 'mark@artificial.htb',
    password: '0f3d8c76530022670f1c6029eed09ccb'
  },
  {
    id: 3,
    nombre: 'Robert',
    email: 'robert@artificial.htb',
    password: 'hash_de_ejemplo'
  }
]
</pre>

<p>Si tienes alg√∫n error de ejecuci√≥n por <Strong>import mysql2</Strong> prueba editando el archivo <Strong>package.json</Strong> y asegurate de que esta linea quede igual:</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
notepad package.json
</pre>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
"type": "module"
</pre>

    <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      üîí Nunca guardes contrase√±as en el c√≥digo visible del cliente.  
      Las conexiones a bases de datos siempre deben hacerse desde el servidor.
    </p>
  </section>

  <section>
    <h2>üåê Crear un backend con Express</h2>

<p>
  Primero crearemos otra carpeta llamada <strong>proyecto_express</strong>, para eso ejecutaremos los siguientes comandos.
</p>

<pre style="background-color:#eee; padding:15px; border-radius:10px;">
#Para regresar a la ruta anterior
cd .. 

#Creamos la carpeta del proyecto
mkdir proyecto_express 

#Navegamos al proyecto
cd .\proyecto_express\
</pre>

<p>
  Usaremos el framework <strong>Express</strong> para crear una API que permita acceder a los datos desde el navegador y creamos el archivo del proyecto.
</p>

<pre style="background-color:#eee; padding:15px; border-radius:10px;">
npm install express mysql2 cors

notepad server.js
</pre>

<pre style="background-color:#eee; padding:15px; border-radius:10px;">
// archivo: server.js

// Importamos las librer√≠as necesarias:
// - express: para crear el servidor web.
// - mysql2: para conectarnos a una base de datos MySQL.
// - cors: para permitir peticiones desde otros or√≠genes (por ejemplo, desde tu archivo HTML local).
import express from 'express';
import mysql from 'mysql2';
import cors from 'cors';

// Creamos una instancia de Express (nuestro servidor web).
const app = express();

// Activamos CORS para que el navegador no bloquee las peticiones
// que vienen desde otro dominio o puerto (como un HTML abierto en tu PC).
app.use(cors());

// Configuramos los datos de conexi√≥n a MySQL.
const db = mysql.createConnection({
  host: 'localhost',        // Direcci√≥n del servidor MySQL (local en este caso)
  user: 'root',             // Usuario de la base de datos
  password: 'toor', // Contrase√±a del usuario
  database: 'base_de_datos' // Nombre de la base de datos que queremos usar
});

// Intentamos conectar a la base de datos MySQL.
db.connect(err => {
  if (err) {
    console.error('Error de conexi√≥n:', err);
    return; // Si hay error, detenemos aqu√≠.
  }
  console.log('Conectado a MySQL'); // Si todo sale bien, mostramos un mensaje.
});

// Creamos una ruta GET en el servidor llamada "/usuarios".
// Cuando alguien visita http://localhost:3000/usuarios,
// se ejecutar√° esta funci√≥n.
app.get('/usuarios', (req, res) => {
  // Hacemos una consulta SQL para obtener todos los registros de la tabla "usuarios".
  db.query('SELECT * FROM usuarios', (err, results) => {
    if (err) {
      // Si ocurre un error en la consulta, lo mostramos en consola
      // y respondemos al navegador con un error en formato JSON.
      console.error('Error en consulta:', err);
      res.status(500).json({ error: 'Error al consultar la base de datos' });
      return;
    }

    // Si la consulta fue exitosa, enviamos los resultados al navegador en formato JSON.
    res.json(results);
  });
});

// Iniciamos el servidor en el puerto 3000.
// Cuando est√© listo, mostrar√° un mensaje en consola.
app.listen(3000, () => console.log('Servidor activo en http://localhost:3000'));

</pre>

</pre>

<p>Una vez creado el archivo inicia el programa con el siguiente comando:
</p><pre style="background-color:#eee; padding:15px; border-radius:10px;">
node server.js
</pre>

    <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      üí° En el navegador metete directamente a la ruta <a href="http://localhost:3000/usuarios" target="_blank">http://localhost:3000/usuarios</a> y observa lo que pasa .  
    </p>

  </section>

  <section>
    <h2>üß© Consumir los datos desde una p√°gina web</h2>

<p>
  Crearemos un archivo <strong>HTML</strong> y creamos un servidor web simple.
</p>

<pre style="background-color:#eee; padding:15px; border-radius:10px;">
cd .. 

mkdir web_page

cd .\web_page\

notepad index.html
</pre>

    <p>
      Ahora puedes mostrar los datos de la base de datos en una p√°gina HTML usando <code>fetch()</code>.
    </p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
// archivo: index.html
&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;body&gt;
  &lt;h1&gt;Lista de usuarios&lt;/h1&gt;
  &lt;ul id="lista"&gt;&lt;/ul&gt; &lt;!-- Aqu√≠ se mostrar√° la lista de usuarios --&gt;

  &lt;script&gt;
    // Hacemos una solicitud al servidor local en el puerto 3000
    fetch('http://localhost:8080/usuario')
      // Convertimos la respuesta a formato JSON (arreglo de usuarios en la ruta /usuarios)
      .then(r =&gt; r.json())
      // Cuando los datos ya est√°n listos, los mostramos en la p√°gina
      .then(usuarios =&gt; 
        // Insertamos dentro del &lt;ul&gt; un conjunto de &lt;li&gt; generados autom√°ticamente
        document.getElementById('lista').innerHTML = 
          // .map() recorre cada usuario y genera una l√≠nea con su informaci√≥n
          usuarios.map(u =&gt; `&lt;li&gt;${u.id} - ${u.nombre} (${u.correo})&lt;/li&gt;`).join('')
      );
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
  </section>
<p>
Servimos la pagina web simple con la IP en el puerto 80
</p>
<pre style="background-color:#eee; padding:15px; border-radius:10px;">
npx serve -p 80
</pre>

    <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      üí° <Strong>Ejercicio:</Strong> El codigo html funciona mal aproposito, tu trabajo ser√° encontrar los 3 errores manualmente y obtener como resultado al acceder al <strong>localhost</strong> en el navegador.  
      </p>
      <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
      Para hacerlo, analiza la base de datos <strong>Mysql</strong> y presta atenci√≥n detenidamente a los comentarios (Los comentarios est√°n bien, el c√≥digo es el que tiene los errores).
      </p>
      <p style="background-color:#eef; padding:10px; border-left:4px solid #4a90e2; border-radius:5px;">
         Deber√°s tener una salida como la siguiente:
      </p>
    

<figure style="
  display: flex;
  justify-content: center;
  background-color: #f9f9f9;
  padding: 15px;
  border-radius: 28px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  margin: 10px auto;
  max-width: 300px;
">
  <img src="database.png" alt="Diagrama de base de datos" style="
    width: 100%;
    border-radius: 10px;
  ">
</figure>

  <section>
    <h2>üìã Resumen</h2>
    <ul>
      <li>JavaScript puede ejecutarse tanto en el navegador como en el servidor.</li>
      <li><strong>Node.js</strong> permite usar JavaScript en el backend.</li>
      <li>Desde Node.js puedes conectarte directamente a bases de datos como MySQL.</li>
      <li>Desde el navegador, debes comunicarte con un backend seguro.</li>
    </ul>
  </section>

<section>
  <h2>üìã Notas Adicionales</h2>

  <h3>üöÄ ¬øQu√© es Express?</h3>
  <p>
    <strong>Express</strong> es un <em>framework</em> para <strong>Node.js</strong> que sirve para crear
    servidores web f√°cilmente.  
    Piensa en √©l como una herramienta que te permite decirle a tu programa:
  </p>

  <blockquote>
    ‚ÄúCuando alguien visite esta URL, responde con esto.‚Äù
  </blockquote>

  <p>Por ejemplo:</p>
  <pre><code class="language-js">
import express from 'express';
const app = express();

app.get('/', (req, res) => {
  res.send('Hola desde el servidor!');
});

app.listen(3000, () => console.log('Servidor activo en http://localhost:3000'));
</code></pre>

  <hr>

  <h3>üåê ¬øQu√© es CORS?</h3>
  <p>
    <strong>CORS</strong> significa <em>Cross-Origin Resource Sharing</em>
    (Compartici√≥n de recursos entre or√≠genes).
  </p>

  <h4>üîí El problema:</h4>
  <p>
    Por seguridad, los navegadores bloquean las peticiones que vienen desde una p√°gina
    (como tu HTML local) hacia otro dominio o puerto
    (como tu servidor <code>http://localhost:3000</code>).
  </p>

  <p>Ejemplo:</p>
  <ul>
    <li>Tu HTML est√° en: <code>file:///D:/proyecto/index.html</code></li>
    <li>Tu servidor Express est√° en: <code>http://localhost:3000</code></li>
  </ul>

  <p>
    üëâ El navegador los ve como <strong>diferentes or√≠genes</strong>, y bloquea el <code>fetch()</code>.
  </p>

  <h4>üîì La soluci√≥n:</h4>
  <p>
    El m√≥dulo <code>cors</code> (de <code>npm</code>) le dice a tu servidor Express:
  </p>

  <blockquote>
    ‚ÄúS√≠, permite peticiones desde otros or√≠genes.‚Äù
  </blockquote>

  <p>Solo a√±ade estas l√≠neas al inicio de tu servidor:</p>
  <pre><code class="language-js">
import cors from 'cors';
app.use(cors());
</code></pre>
</section>


  <section>
    <h2>üèÅ Conclusi√≥n</h2>
    <p>
      Con esta gu√≠a puedes crear un entorno completo con JavaScript y MySQL.  
      Gracias a Node.js, puedes usar el mismo lenguaje tanto en el frontend como en el backend, 
      facilitando el desarrollo de aplicaciones <strong>full-stack</strong>.
    </p>
  </section>

  <footer style="margin-top:40px; text-align:center;">
    <hr>
    <p>üìó Gu√≠a creada para aprender a conectar JavaScript con MySQL usando Node.js ‚Äî sin frameworks adicionales.</p>
  </footer>

</body>
</html>
